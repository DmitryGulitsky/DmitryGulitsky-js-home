<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>game</title>
</head>
<body>
<input type='button' value='старт!' onclick='Start()'>
<br/><br/>
<div style='width: 400px; height: 300px;
      border: solid blue 1px; position: relative'>
  <div id="firstPlayer"
       style="position: absolute;width: 10px; height: 70px; background-color: green"
  ></div>
  <img src='img/ball.png' id='IBall'
       style='position: absolute; width: 50px'>
  <div id="secondPlayer" style="position: absolute; left: 390px; width: 10px; height: 70px; background-color: red"></div>
</div>

<script>

  var firstPlayerH =
    {
      PosX: 0,
      PosY: 100,
      Speed: 0,
      Width: 10,
      Height: 70,
      Update: function () {
        var FirstObj = document.getElementById('firstPlayer');
        FirstObj.style.top = this.PosY + "px";
      }
    };

  var secondPlayerH =
    {
      PosX: 0,
      PosY: 100,
      Speed: 0,
      Width: 10,
      Height: 70,
      Update: function () {
        var SecondObj = document.getElementById('secondPlayer');
        SecondObj.style.top = this.PosY + "px";
      }
    };

  var BallH =
    {
      PosX: 100,
      PosY: 100,
      SpeedX: 50,
      /*Теперь у мяча есть и вертикальная составляющая скорости — SpeedY*/
      SpeedY: 10,
      Width: 50,
      Height: 50,

      Update: function () {
        var BallObj = document.getElementById('IBall');
        BallObj.style.left = this.PosX + "px";
        BallObj.style.top = this.PosY + "px";
      }
    };

  var AreaH =
    {
      Width: 400,
      Height: 300
    }

  function Start() {
    // плавное движение - от 25 кадр/сек
    setInterval(Tick, 40);
  }

  function Tick() {
    BallH.PosX += BallH.SpeedX;
    // вылетел ли мяч правее стены?
    if (BallH.PosX + BallH.Width > AreaH.Width) {
      BallH.SpeedX = -BallH.SpeedX;
      BallH.PosX = AreaH.Width - BallH.Width;
    }
    if (BallH.PosX < 0) // вылетел ли мяч левее стены
    {
      BallH.SpeedX = -BallH.SpeedX;
      BallH.PosX = 0;
    }
    /*В каждом кадре мы теперь также увеличиваем координату Y мяча на вертикальную
    составляющую скорости, и выполняем те же проверки — не столкнулся ли мяч с нижней
    или верхней границей поля, если столкнулся — позиционируем мяч прямо к границе и
    меняем знак вертикальной составляющей скорости.*/
    BallH.PosY += BallH.SpeedY;
    // вылетел ли мяч ниже пола?
    if (BallH.PosY + BallH.Height > AreaH.Height) {
      BallH.SpeedY = -BallH.SpeedY;
      BallH.PosY = AreaH.Height - BallH.Height;
    }
    // вылетел ли мяч выше потолка?
    if (BallH.PosY < 0) {
      BallH.SpeedY = -BallH.SpeedY;
      BallH.PosY = 0;
    }

    firstPlayerH.PosY += firstPlayerH.Speed; // задаем движение для левой ракетки
    secondPlayerH.PosY += secondPlayerH.Speed; // задаем движение для правой ракетки

    firstPlayerH.Update();
    secondPlayerH.Update();
    BallH.Update();

  }

function playersMove (KeyboardEvent) {
    console.log('нажал');
  var e = KeyboardEvent;
  console.log('e.event = ' + e.keyCode);
    console.log(e.keyCode === 16);

   if (e.keyCode === 16) { // если нажата клавиша shift
     firstPlayerH.Speed = -10;
   }
   if (e.keyCode === 17) { // если нажата клавиша ctrl
     firstPlayerH.Speed = 10;
   }
   if (e.keyCode === 38) { // если нажата клавиша вверх
     secondPlayerH.Speed = -10;
   }
   if (e.keyCode === 40) { // если нажата клавиша вниз
     secondPlayerH.Speed = 10;
   }
}

  function playersStop () {
    var e = KeyboardEvent;
    console.log('отжал');
    if (e.keyCode === 16 || 17) {
      firstPlayerH.Speed = 0;
    }
    if (e.keyCode === 38 || 40) {
      secondPlayerH.Speed = 0;
    }

  }

  firstPlayerH.Update();
  secondPlayerH.Update();
  BallH.Update();
  addEventListener('keydown', playersMove);
  addEventListener('keyup', playersStop);
</script>
</body>
</html>